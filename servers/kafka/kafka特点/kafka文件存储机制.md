由于生产者生产的消息会不断追加到log文件末尾，为防止log文件过大导致数据定位效率低下，kafka采取了分片和索引机制，将每个partition分为多个segment。每个segment对应两个文件“.log”文件和“.index”文件。这些文件位于一个文件夹下，该文件夹的命名规则为topic名称+分区序号。例如：first这个topic有三个分区，则其对应的文件夹为first-0，first-1，first-2

index和log文件以当前segment的第一条消息的offset命名。
```
000000000000000000.index
000000000000000000.log

000000000000170410.index
000000000000170410.log

000000000000239430.index
000000000000239430.log
```
“.index”文件存储大量的索引信息，“.log”文件存储大量的数据，索引文件中的元数据指向对应数据文件中message的物理偏移地址。

