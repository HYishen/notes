新版本的Consumer的位移管理机制，就是将Consumer的位移数据作为一条条普通的Kafka消息，提交到__consumer_offsets中。可以说，__consummer_offsets的主要作用是保存Kafka消费者的位移信息。
```
消费者位移要求这个提交过程不仅要实现高持久性，还要支持高频的写操作。显然，Kafka 的主题设计天然就满足这两个条件，因此，使用 Kafka 主题来保存位移这件事情，实际上就是一个水到渠成的想法了。
```

虽说位移主题是一个普通的kafka主题，但是它的消息格式确实kafka自己定义的，用户不能更改。

当kafka集群中的第一个Consumer程序启动时，Kafka会自动创建位移主题。

Kafka使用Compact策略来删除位移主题中的过期消息，避免该主题无限期膨胀。
```
Kafka 提供了专门的后台线程定期地巡检待 Compact 的主题，看看是否存在满足条件的可删除数据。这个后台线程叫 Log Cleaner。
很多实际生产环境中都出现过位移主题无限膨胀占用过多磁盘空间的问题，如果你的环境中也有这个问题，我建议你去检查一下 Log Cleaner 线程的状态，通常都是这个线程挂掉了导致的。
```